# DataMining

> 数据挖掘课程的作业。通过上海地铁乘坐情况来分析不同区域的幸福指数。

* `.csv`文件统一使用`gbk`编码

## 清洗数据

清洗数据是为了发现规则的工作日和休息日的地铁交通信息。

源数据头分别为：`id`, `date`, `time`, `station`, `type`, `money`, `discount`

### step 1

从所有一卡通数据中筛选出只包含地铁数据的条目。

### step 2

在只包含地铁的数据条目中寻找出六个工作日内出现过一天有且仅有4条记录的出行。保存这些记录。

### step 3

使用`pandas.groupby()`来根据`id`聚合数据。通过以下原则抽取出这些数据条目中的有效`id`：

* 对每个`id`的`station`集合，长度都为2，也就是每天上下班站点稳定
* 六个工作日乘坐总次数多于20次

### get_workday_data

通过获取的有效`id`集合，我们从step1中提取的地铁数据获取十个有效工作日的乘车数据，作为本次数据分析的工作日出行数据。

### get_workday_data

通过获取的有效`id`集合，我们从step1中提取的地铁数据获取对应两个周末的乘车数据，作为本次数据分析的周末出行数据。

## 聚类

## 数据可视化

将聚类结果的站名和对应的地铁站名相映射，获取到地铁站的坐标，并在地图上标注出来。

融合之前的label定义：
work：  label：1 工作
        label：2 住宿
        label：0 忽略
sunday：label：1 中级商圈
        label：2 顶级商圈
        label：0,3 次级和底级，忽略
融合之后新的label定义：
0. 无存在感点 0+0
1. 纯工作 work(1)+sunday(0,3)
2. 纯住宿 work(2)+sunday(0,3)
3. 工作商圈 work(1)+sunday(1,2)
4. 住宿商圈 work(2)+sunday(1,2)